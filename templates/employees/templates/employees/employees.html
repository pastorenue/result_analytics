{% extends "base.html" %}

{% block page %}employees{% endblock %}

{% block sidepane %}
<h2 class="employee-management">
    <i class="fa fa-arrow-circle-o-right fa-fw"></i> Actions
</h2>
<ul>
    {% if employee.user == user %}
	<li><a href="{% url 'employees_my_payslips' employee_id=employee.pk %}">
            <i class="fa fa-file-text-o fa-fw"></i> My Payslips
	    </a>
	</li>
	<li><a href="{% url 'employees_pension_contributions' employee_id=employee.pk %}">
            <i class="fa fa-suitcase fa-fw"></i> My Pension Contributions
	    </a>
	</li>
	<li><a href="{% url 'employees_leave_history' employee_id=employee.pk %}">
            <i class="fa fa-external-link fa-fw"></i> My Leave History
	    </a>
        </li>
	<li>
            <a href="{% url 'employees_employee_loans' employee_id=employee.pk %}">
            <i class="fa fa-money fa-fw"></i> My Loan History
	    </a>
	</li>
	<li>
            <a href="{% url 'employees_employee_claims' employee_id=employee.pk %}">
            <i class="fa fa-money fa-fw"></i> My Expense Claims
	    </a>
	</li>
	<li>
	    <a href="{% url 'approvals_pending' %}">
		<i class="fa fa-file-text-o fa-fw"></i>
		Approvals For My Attention
	    </a>
	</li>
    {% endif %}
    
    {% if employee %}
        {% if employee.user == user or perms.can_manage_employees %}
        <li>
        {% with pending_appraisal=employee.appraisals.pending.0 %}
            {% if pending_appraisal %}
                <a href="{{ pending_appraisal.get_absolute_url }}">
                    {% if not pending_appraisal.is_editable %}<span class="badge badge-warning badge-full right">OVERDUE</span>{% endif %}
                    <i class="fa fa-arrow-right fa-fw"></i>
                    View Pending Appraisal
                </a>
            {% else %}
                {% if perms.can_schedule_appraisal %}
                <a href="{% url 'appraisals_schedule_appraisal' employee_id=employee.pk %}">
                    <i class="fa fa-calendar-o fa-fw"></i>
                    Schedule Appraisal
                </a>
                {% endif %}
            {% endif %}
        {% endwith %}
        </li>
        {% endif %}
    {% endif %}

    {% if perms.employees.can_manage_employees %}
        {% if employee %}
            <li><a href="{% url 'employees_payinfo' employee_id=employee.pk %}">
                <i class="fa fa-th fa-fw"></i> {{ employee.first_name|capfirst }}'s Pay Information
            </a></li>
            <li><a href="{% url 'promotion_promote_employee' employee_id=employee.pk %}">
                <i class="fa fa-arrow-up fa-fw"></i> Promote {{ employee.first_name|capfirst }}
            </a></li>
            <li><a href="{% url 'employees_move_employee' employee_id=employee.pk %}">
                <i class="fa fa-exchange fa-fw"></i> Transfer {{ employee.first_name|capfirst }}
            </a></li>
            {% if not employee.is_leaving %}
                <li><a href="{% url 'employees_exit' employee_id=employee.pk %}">
                    <i class="fa fa-sign-out fa-fw"></i> Process {{ employee.first_name|capfirst }}'s Exit
                </a></li>
            {% endif %}
        {% else %}
            <li><a href="{% url 'employees_add_employee' %}">
                <i class="fa fa-user fa-fw"></i> Add a New Employee
            </a></li>
            <li><a href="{% url 'attendance_list' %}">
                <i class="fa fa-clock-o fa-fw"></i> Manage Attendance
            </a></li>
            <li><a href="{% url 'employees_list_additional_fields' %}">
                <i class="fa fa-th-list fa-fw"></i> Manage Custom Employee Fields
            </a></li>
            <li><a href="{% url 'leave_list' %}">
                <i class="fa fa-external-link fa-fw"></i> Manage Employee Leave
            </a></li>
            <li><a href="{% url 'loans_list' %}">
                <i class="fa fa-money fa-fw"></i> Manage Employee Loans
            </a></li>
	    <li>
		<a href="{% url 'claims_list' %}">
		    <i class="fa fa-money fa-fw"></i>Manage Employee Claims
		</a>
	    </li>
            <li><a href="{% url 'promotion_promote_employees' %}">
                <i class="fa fa-group fa-fw"></i> Promote Employees
            </a></li>
            {% if perms.approvals.can_approve %}
                <li>
                    <a href="{% url 'approvals_pending' %}">
                        <i class="fa fa-inbox fa-fw"></i> Requests For Your Approval
                        {% comment %}<span class="badge badge-inverse badge-small right">0</span>{% endcomment %}
                    </a>
                </li>
            {% endif %}
        {% endif %}
    {% endif %}
</ul>

{% if perms.can_export_employees %}
<h2>
    <i class="fa fa-bar-chart-o fa-fw"></i> Reports
</h2>
<ul>
	<li><a href="{% url 'employees_export_employees' %}">
        <i class="fa fa-download fa-fw"></i> Download Employee List
    </a></li>
</ul>
{% endif %}
{% endblock %}
